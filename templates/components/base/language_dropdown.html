{% load static %}
{% load i18n %}
{% load parler_tags %}

{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}

<div class="rr-header-2-lang {% if mobile %}d-xxl-none d-block{% else %}d-none d-md-block{% endif %} ml-60">
    <select style="display: none;">
        {% for language in languages %}
            <option>{{ language.name_local }}</option>
        {% endfor %}
    </select>
    <div class="nice-select" tabindex="0">
        <span class="current">
        <img src="{% get_static_prefix %}img/flags/{{ LANGUAGE_CODE }}.png"
             alt="{{ LANGUAGE_CODE }}" width="30">
            {% for language in languages %}
                {% if language.code == LANGUAGE_CODE %}
                    {{ language.name_local|upper }}
                {% endif %}
            {% endfor %}
        </span>
        <ul class="list z-index-2">
            {% for language in languages %}
                <li data-value="{{ language.name_local|upper }}"
                    class="option {% if language.code == LANGUAGE_CODE %}selected focus{% endif %}">
                    <a href="{% get_translated_url language.code %}" class="text-dark">
                        <img src="{% get_static_prefix %}img/flags/{{ language.code }}.png"
                             alt="{{ language.code|capfirst }}" width="30"/>
                        {{ language.name_local|upper }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>